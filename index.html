<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Birzeit Univresity Campus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <style>
    body {
      margin: 0;
      height: 100vh;
      width: 100%;
      position: relative;
    }
    #map {
      position: absolute;
      width: 100%;
      top: 0;
      bottom: 0;
    }
    #searchInput {
      position: absolute;
      top: 10px;
      left: 20px;
      z-index: 1000;
      width: calc(100% - 100px);
      max-width: 200px;
    }
    #searchNote {
      position: absolute;
      color: red;
      font-size: 12px; /* Smaller font size for legend */
      z-index: 1000;
    }
    #locateButton {
      position: absolute;
      top: 50px;
      left: 20px;
      z-index: 1000;
    }
    .leaflet-routing-container {
        background-color: transparent; /* No background color */
        color: red; /* Font color to red */
        font-size: 12px; /* Smaller font size for route instructions */
        position: relative; /* Ensure proper positioning */
        right: 20px; /* Move the container 20 pixels from the right */
        transform: translate(1%, 80%); /* Move the container 80% of its own height to the bottom */
    }
    @media (min-width: 769px) {
      #searchInput {
        left: auto;
        right: 20px;
      }
      #searchNote {
        left: auto;
        right: 20px;
        top: 40px;
      }
      #locateButton {
        left: auto;
        right: 20px;
        top: 80px;
      }
    }
    @media (max-width: 768px) {
      #searchInput {
        left: 50px;
      }
      #searchNote {
        top: 40px;
        left: 20px;
      }
      #locateButton {
        left: 50px;
        top: 100px;
      }
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <input type="text" id="searchInput" placeholder="Search by ID" />
  <div id="searchNote">ID values are between 1 and 8.</div>
  <button id="locateButton">Get my location</button>
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-routing-machine/3.2.12/leaflet-routing-machine.js"></script>
  <script>
    const mapOptions = {
      zoomSnap: 0.5,
      center: [31.960055, 35.182576], // Updated center coordinates
      zoom: 17.5,
    };
    const map = L.map("map", mapOptions);

    // Adding the new Esri World Imagery layer
    var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
    }).addTo(map);

    var collegeLayer;
    $.getJSON("colleges_edit.json", function(Colleges) {
      console.log("colleges_edit data loaded", Colleges); // Debugging log
      collegeLayer = L.geoJson(Colleges, {
        pointToLayer: function(feature, latlng) {
          console.log("College feature", feature); // Debugging log
          return L.circleMarker(latlng, {
            radius: 5,
            fillColor: "blue",
            color: "blue",
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
          });
        },
        onEachFeature: function(feature, layer) {
          layer.bindPopup("College ID: " + feature.properties.college_ID);
        }
      }).addTo(map);
    }).fail(function(jqxhr, textStatus, error) {
      console.error("Error loading colleges_edit.json: ", textStatus, error); // Error handling
    });

    $('#locateButton').click(function() {
      map.locate({setView: true, maxZoom: 16});
    });

    map.on('locationfound', function(e) {
      var myLocation = e.latlng;
      // Additional location found logic can go here if needed
    });
  </script>
</body>
</html>
